{{ $recentArticles := 5 }}
{{ $recentArticles = .Site.Params.homepage.showRecentItems }}

{{ $allPages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
{{ $pages := slice }}
{{ range $allPages }}
  {{ $hide := false }}
  {{ with .Params.hideFromHomeAfter }}
    {{ if now.After (. | time) }}
      {{ $hide = true }}
    {{ end }}
  {{ end }}
  {{ if not $hide }}
    {{ $pages = $pages | append . }}
  {{ end }}
{{ end }}

<section class="space-y-10 w-full">
  {{ range first $recentArticles (.Paginate $pages).Pages }}
    {{ partial "article-link/simple.html" . }}
  {{ end }}
</section>
